{% extends 'base.html' %}
{% block content %}

<style>
		@import url('https://fonts.googleapis.com/css2?family=Great+Vibes:wght@400&family=Playfair+Display:wght@600;700&family=Lora:wght@400;500;600&display=swap');
		.dashboard-container{max-width:1200px;margin:0 auto;padding:2rem 0}
		.dashboard-header{background:linear-gradient(135deg,#000 0%,#222 100%);color:#fff;padding:2.5rem;border-radius:12px;margin-bottom:3rem;box-shadow:0 8px 24px rgba(0,0,0,.15)}
		.dashboard-header h1{font-family:'Great Vibes','Playfair Display',serif;font-size:3rem;font-weight:400;margin-bottom:.5rem}
		.dashboard-header p{font-family:'Lora',serif;font-size:1.1rem;opacity:.95;margin:0}
		.dashboard-user-info{display:flex;align-items:center;gap:1.5rem;margin-top:1.5rem;padding-top:1.5rem;border-top:1px solid rgba(255,255,255,.2)}
		.user-avatar{width:60px;height:60px;border-radius:50%;background:#333;border:2px solid #fff;display:flex;align-items:center;justify-content:center;font-size:1.8rem;font-weight:700;color:#fff}
		.user-details h3{margin:0 0 .25rem 0;font-family:'Playfair Display',serif;font-size:1.3rem;font-weight:600}
		.user-details p{margin:0;opacity:.9;font-size:.95rem;font-family:'Lora',serif}
		.stats-section{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:1.5rem;margin-bottom:3rem}
		.stat-card{background:#fff;border-radius:10px;padding:2rem;text-align:center;box-shadow:0 4px 12px rgba(0,0,0,.08);transition:all .3s ease;border:2px solid #f0f0f0}
		.stat-number{font-family:'Playfair Display',serif;font-size:2.2rem;font-weight:700;color:#000}
		.stat-label{color:#666;font-size:.95rem;margin-top:.5rem;font-family:'Lora',serif;text-transform:uppercase;letter-spacing:.5px}
		.section-title{font-family:'Playfair Display',serif;font-size:2rem;font-weight:700;color:#000;margin-bottom:2rem;padding-bottom:1rem;border-bottom:3px solid #000;display:inline-block}
		.items-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(350px,1fr));gap:1.5rem}
		.item-card{background:#fff;border:1px solid #e0e0e0;border-radius:10px;padding:1.5rem;transition:all .3s ease;box-shadow:0 2px 8px rgba(0,0,0,.05)}
		.item-header{display:flex;justify-content:space-between;align-items:flex-start;margin-bottom:1rem}
		.item-id{font-size:.85rem;color:#666;text-transform:uppercase;letter-spacing:.5px;font-weight:600;font-family:'Lora',serif}
		.item-title{font-family:'Playfair Display',serif;font-size:1.2rem;font-weight:700;color:#000;margin:.5rem 0}
		.meta-label{color:#888;font-weight:600;text-transform:uppercase;font-size:.75rem;letter-spacing:.5px;margin-bottom:.25rem;font-family:'Lora',serif}
		.meta-value{color:#222;font-weight:600;font-size:.95rem;font-family:'Lora',serif}
		.status-badge{display:inline-block;padding:.4rem .8rem;border-radius:20px;font-size:.8rem;font-weight:600;text-transform:uppercase;letter-spacing:.5px;font-family:'Lora',serif}
		.status-pending{background:#fff3cd;color:#856404}
		.status-confirmed{background:#d4edda;color:#155724}
		.status-completed{background:#cce5ff;color:#004085}
		.status-cancelled{background:#f8d7da;color:#721c24}
		.price{font-family:'Playfair Display',serif;font-size:1.5rem;font-weight:700;color:#000;margin-top:1rem;padding-top:1rem;border-top:1px solid #f0f0f0}
		.empty-state{text-align:center;padding:3rem 2rem;background:#f8f8f8;border-radius:10px;border:2px dashed #ddd}
		.empty-text{color:#888;font-size:1.1rem;margin:0;font-family:'Lora',serif}
		.action-buttons{display:flex;gap:1rem;margin-top:2rem;flex-wrap:wrap}
		.btn-primary-custom{background:#000;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease;text-decoration:none;display:inline-block;font-size:.95rem;font-family:'Lora',serif}
		.btn-secondary-custom{background:#fff;color:#000;border:2px solid #000;padding:.6rem 1.4rem;border-radius:6px;font-weight:600;cursor:pointer;font-family:'Lora',serif}
		.btn-danger-custom{background:#dc3545;color:#fff;border:none;padding:.75rem 1.5rem;border-radius:6px;font-weight:600;cursor:pointer}
		@media(max-width:768px){.dashboard-header{padding:1.5rem}.dashboard-header h1{font-size:2rem}.dashboard-user-info{flex-direction:column;text-align:center;align-items:center}.items-grid{grid-template-columns:1fr}.stats-section{grid-template-columns:repeat(2,1fr)}.action-buttons{flex-direction:column}.action-buttons a,.action-buttons button{width:100%;text-align:center}}
</style>

<div class="dashboard-container">
	<div class="dashboard-header">
		<h1>Welcome Back</h1>
		<p>Manage your orders, bookings, and account settings</p>
		<div class="dashboard-user-info">
			<div class="user-avatar">{{ user.first_name|slice:":1"|upper|default:"U" }}</div>
			<div class="user-details">
				<h3>{{ user.first_name|default:user.username }} {{ user.last_name }}</h3>
				<p>{{ user.email }}</p>
			</div>
		</div>
	</div>

	<div class="stats-section">
		<div class="stat-card">
			<div class="stat-number">{{ orders|length }}</div>
			<div class="stat-label">Total Orders</div>
		</div>
		<div class="stat-card">
			<div class="stat-number">{{ bookings|length }}</div>
			<div class="stat-label">Portrait Bookings</div>
		</div>
		<div class="stat-card">
			<div class="stat-number">₹ {{ total_spent|default:"0" }}</div>
			<div class="stat-label">Total Spent</div>
		</div>
		<div class="stat-card">
			<div class="stat-number">5.0</div>
			<div class="stat-label">Average Rating</div>
		</div>
	</div>

	<div class="items-container">
		<h2 class="section-title">My Orders</h2>
		{% if orders %}
			<div class="items-grid">
				{% for order in orders %}
					<div class="item-card">
						<div class="item-header">
							<span class="item-id">Order #{{ order.id }}</span>
							<span class="status-badge {% if 'Pending' in order.get_order_status_display %}status-pending{% elif 'Confirmed' in order.get_order_status_display %}status-confirmed{% elif 'Completed' in order.get_order_status_display %}status-completed{% else %}status-cancelled{% endif %}">
								{{ order.get_order_status_display }}
							</span>
						</div>
						<h3 class="item-title">Order Summary</h3>
						<div class="item-meta">
							<div class="meta-item">
								<div class="meta-label">Order Date</div>
								<div class="meta-value">{{ order.created_at|date:"M d, Y" }}</div>
							</div>
							<div class="meta-item">
								<div class="meta-label">Items</div>
								<div class="meta-value">{{ order.items.count }} items</div>
							</div>
						</div>
						<div class="price">₹ {{ order.total_price }}</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="empty-state">
				<p class="empty-text">No orders yet. Start shopping to see them here!</p>
				<a href="{% url 'home' %}" class="btn-primary-custom" style="margin-top:1rem">Continue Shopping</a>
			</div>
		{% endif %}
	</div>

	<div class="items-container">
		<h2 class="section-title">My Portrait Bookings</h2>
		{% if bookings %}
			<div class="items-grid">
				{% for booking in bookings %}
					<div class="item-card">
						<div class="item-header">
							<span class="item-id">Booking #{{ booking.id }}</span>
							<span class="status-badge {% if 'Pending' in booking.get_booking_status_display %}status-pending{% elif 'Confirmed' in booking.get_booking_status_display %}status-confirmed{% elif 'Completed' in booking.get_booking_status_display %}status-completed{% else %}status-cancelled{% endif %}">
								{{ booking.get_booking_status_display }}
							</span>
						</div>
						<h3 class="item-title">{{ booking.category }}</h3>
						<div class="item-meta">
							<div class="meta-item">
								<div class="meta-label">Size</div>
								<div class="meta-value">{{ booking.size }}</div>
							</div>
							<div class="meta-item">
								<div class="meta-label">Preferred Date</div>
								<div class="meta-value">{{ booking.preferred_date|default:"TBD" }}</div>
							</div>
							<div class="meta-item">
								<div class="meta-label">City</div>
								<div class="meta-value">{{ booking.city }}</div>
							</div>
							<div class="meta-item">
								<div class="meta-label">Booking Date</div>
								<div class="meta-value">{{ booking.created_at|date:"M d, Y" }}</div>
							</div>
						</div>
						<div class="price">₹ {{ booking.price }}</div>
					</div>
				{% endfor %}
			</div>
		{% else %}
			<div class="empty-state">
				<p class="empty-text">No portrait bookings yet. Book a custom portrait today!</p>
				<a href="{% url 'booking' %}" class="btn-primary-custom" style="margin-top:1rem">Book Now</a>
			</div>
		{% endif %}
	</div>

	<div class="action-buttons">
		<a href="{% url 'home' %}" class="btn-primary-custom">Continue Shopping</a>
		<a href="{% url 'booking' %}" class="btn-primary-custom">Book Portrait</a>
		<a href="{% url 'feedback:feedback_list' %}" class="btn-secondary-custom">Leave Feedback</a>
		<a href="{% url 'logout' %}" class="btn-danger-custom">Logout</a>
	</div>
</div>

{% endblock %}
